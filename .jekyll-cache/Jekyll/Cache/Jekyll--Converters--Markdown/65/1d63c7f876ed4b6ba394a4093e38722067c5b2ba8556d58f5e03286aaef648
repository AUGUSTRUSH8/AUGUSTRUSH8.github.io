I"Û:<p>å…ˆå¼•ç”¨ä¸€æ®µæè¿°æ€§çš„æ–‡å­—ï¼š</p>

<blockquote>
  <p>SeetaFaceå¼€æºåº“ç”±FaceDetectionã€FaceAlignmentã€FaceIdentificationä¸‰éƒ¨åˆ†ç»„æˆã€‚FaceDetectionæ˜¯åœ¨ä¸€å‰¯å›¾ç‰‡ä¸­æ£€æµ‹å‡ºäººè„¸åŒºåŸŸï¼Œä»¥ä¸€ä¸ªæ–¹å½¢åŒºåŸŸè¡¨ç¤ºã€‚FaceAlignmentåˆ©ç”¨FaceDetectionä¸­æ£€æµ‹å‡ºçš„æ–¹æ¡†ï¼Œè¿›ä¸€æ­¥æ£€æµ‹å‡ºäººè„¸çš„5ä¸ªå…³é”®ç‚¹ï¼ˆä¸¤çœ¼ä¸­å¿ƒï¼Œé¼»å°–å’Œä¸¤ä¸ªå˜´è§’ï¼‰ã€‚æœ€åï¼ŒFaceIdentificationåˆ©ç”¨FaceAlignmentä¸­æ£€æµ‹å‡ºçš„å…³é”®ç‚¹ï¼Œæå–å‡ºå•ä¸ªäººè„¸çš„ç‰¹å¾ã€‚</p>
</blockquote>

<p>ä»ä¸­å¯ä»¥çœ‹å‡ºè¿™ä¸ªå¼€æºåº“çš„æ¨¡å—åŠŸèƒ½å’Œç‰¹æ€§ï¼Œä¸‹é¢å°±ç®€å•è¯´ä¸€ä¸‹è¿™ä¸ªå¼€æºæ¨¡å‹å®è·µå½“ä¸­çš„ä¸€äº›å‘ã€‚</p>

<p><strong>ä¸€ç‚¹æ‹“å±•</strong></p>

<p>æœ€è¿‘æ¥è§¦åˆ°å„ç§face detectionçš„æ¨¡å‹ï¼Œä¹Ÿå¯¹å„ç§æ–¹æ³•å’Œæ¨¡å‹çš„ä¼˜åŠ£æœ‰äº†è‡ªå·±çš„è®¤è¯†ï¼Œå…¶ä¸­<strong>è¿™ä¸ªæ¨¡å‹</strong>å®ç°ç®€å•(ä½†Windowsä¸Šå´åˆä¸å°‘éº»çƒ¦çš„åœ°æ–¹ï¼Œä¸»è¦ä½“ç°åœ¨dlibåº“çš„å®‰è£…ä¸Šé¢ï¼Œæœ‰å…´è¶£çš„åŒå­¦å¯ä»¥å‚è€ƒæˆ‘ä¹‹å‰<a href="https://www.jianshu.com/p/772ccb948f1a">å®‰è£…dlibçš„æ–‡ç« </a>)ï¼Œæ•ˆæœä¹Ÿéå¸¸ä¸é”™ï¼Œå…¶æ¨¡å‹ä»‹ç»æœ‰è¿™æ ·å‡ å¥è¯ï¼š</p>

<blockquote>
  <ul>
    <li>The worldâ€™s simplest facial recognition api for Python and the command line</li>
    <li>The model has an accuracy of 99.38% on the<a href="https://link.jianshu.com/?t=http%3A%2F%2Fvis-www.cs.umass.edu%2Flfw%2F">Labeled Faces in the Wild</a>benchmark.</li>
  </ul>
</blockquote>

<p>è¿™ä¸ªæ¨¡å‹ä½¿ç”¨èµ·æ¥æ˜¯ç®€å•ï¼Œä½†æˆ‘è¿˜æ²¡è§£å‰–å®ƒçš„å®ç°æ–¹æ³•å’ŒåŸç†ï¼ŒæŠ½æ—¶é—´å»çœ‹çœ‹ã€‚</p>

<p>å¥½äº†ï¼Œä¸‹é¢è¿›å…¥æ­£é¢˜ï¼Œseetafaceæ˜¯ç”±ä¸­ç§‘é™¢å±±ä¸–å…‰å›¢é˜Ÿç ”ç©¶å¼€æºçš„ä¸€ä¸ªæ¨¡å‹ï¼Œæ®ä»‹ç»å…¶å‡†ç¡®ç‡ä¹Ÿèƒ½è¾¾åˆ°97.1%ï¼Œä½†å¾ˆå¤šå…¶ä»–å®è·µçš„åŒå­¦æ€»ç»“äº†è¿™æ ·å‡ æ¡ç»“è®ºï¼š</p>

<blockquote>
  <p>æ£€æµ‹éƒ¨åˆ†ï¼Œé€Ÿåº¦æœ‰ç‚¹æ…¢ï¼Œè¯¯æ£€ç‡å°ï¼Œæ¼æ£€ç‡ç¨å¾®å¤§
å¯¹é½éƒ¨åˆ†ï¼Œè¿˜æ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯æ•ˆæœè‚¯å®šä¸ä¼šæœ‰SDMå¥½
è¯†åˆ«éƒ¨åˆ†ï¼ŒæŒ‰æˆ‘è‡ªå·±çš„æµ‹è¯•ç»“æœï¼Œå¯¹äºå˜åŒ–æ¯”è¾ƒå¤§çš„2ä¸ªåŒæ ·çš„äººï¼Œ0.7çš„å¾˜å¾Šåˆ†æ•°ï¼Œä¸æ˜¯ä¸€ä¸ªå¯ä»¥å®é™…äº§å“è¯çš„ç®—æ³•ï¼Œä¸ªäººè®¤ä¸ºä¸å¦‚DeepIDå¥½ã€‚
<strong>å…¶å®ï¼Œè¿™äº›éƒ½ä¸é‡è¦ï¼Œå¼€æºç²¾ç¥æœ€å€¼å¾—é’¦ä½©ã€‚</strong></p>
</blockquote>

<p>ä¸ªäººè§‰ç€æœ€åä¸€å¥è¯è¯´çš„å¾ˆå¯¹ã€‚
é‚£ä¹ˆï¼Œä¸‹é¢æˆ‘ä»¬å°±è‡ªå·±æ¥å®è·µä¸€ä¸‹è¿™ä¸ªå¼€æºé¡¹ç›®ã€‚
ç½‘ä¸Šæœ‰å¾ˆå¤šæŒ‡å¯¼æ•™ç¨‹æˆ–è€…åšå®¢ï¼Œä½†å¤§éƒ½è¯´çš„ä¸å®Œå…¨ï¼Œè®©å¾ˆå¤šäººæœ‰äº›ç–‘æƒ‘ï¼Œæœ€ç»ˆè·‘ä»£ç çš„æ—¶å€™ä¼šæŠ›å‡ºbugã€‚
å…¶å®è¯¥å¼€æºé¡¹ç›®ç»™äº†éå¸¸è¯¦å°½çš„æŒ‡å¯¼æ–‡æ¡£ï¼Œåœ°å€å¦‚ä¸‹: <a href="https://link.jianshu.com/?t=https%3A%2F%2Fgithub.com%2Fseetaface%2FSeetaFaceEngine%2Fblob%2Fmaster%2FSeetaFace_config.docx">ä¼ é€é—¨</a></p>

<p>åªè¦è·Ÿç€è¿™ä¸ªæŒ‡å¯¼æ–‡æ¡£ä¸€æ­¥ä¸€æ­¥åšå°±å¥½äº†ï¼Œéå¸¸è¯¦å°½ã€‚
ä¸»è¦è¯´è¯´æ³¨æ„çš„åœ°æ–¹ã€‚æˆ‘çš„è¿è¡Œç¯å¢ƒæ˜¯VS2015+opencv3.0+windowsï¼Œä¹‹å‰çš„é…ç½®åŸºæœ¬éƒ½æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œåªæ˜¯åˆ°äº†æœ€åæµ‹è¯•çš„æ—¶å€™ç”±äºæœ€æ–°çš„æµ‹è¯•ä»£ç æœ‰ç‚¹æ”¹åŠ¨ï¼Œå¯èƒ½æœ‰éƒ¨åˆ†åŒå­¦ä¸çŸ¥é“æœ€åæ€ä¹ˆè´´è·¯å¾„ï¼Œå…¶å®ç¨ç¨çœ‹çœ‹æµ‹è¯•ä»£ç å°±çŸ¥é“æ€ä¹ˆæ”¹äº†ï¼Œä¸‹é¢è´´ä¸€ä¸ªæˆ‘çš„æµ‹è¯•ä»£ç å§ï¼Œæœ‰éœ€è¦çš„åŒå­¦æ”¹åŠ¨ä¸€ä¸‹å°±å¥½ï¼š</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include &lt;cstdint&gt;
#include &lt;fstream&gt;
#include &lt;iostream&gt;
#include &lt;string&gt;
</span>
<span class="cp">#include "highgui.hpp"
#include "imgproc.hpp"
</span>
<span class="cp">#include "face_detection.h"
</span>
<span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span><span class="o">**</span> <span class="n">argv</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">img_path</span> <span class="o">=</span> <span class="s">"D:/my_project/hub_project/FaceRecognition_5/MyBuild/Detection/x64/Release/people.jpg"</span><span class="p">;</span>
    <span class="n">seeta</span><span class="o">::</span><span class="n">FaceDetection</span> <span class="n">detector</span><span class="p">(</span><span class="s">"D:/my_project/hub_project/FaceRecognition_5/MyBuild/Detection/x64/Release/seeta_fd_frontal_v1.0.bin"</span><span class="p">);</span><span class="c1">//seeta_fd_frontal_v1.0.bin æ–‡ä»¶æ˜¯ä½œè€…å·²ç»è®­ç»ƒå¥½å¹¶æä¾›çš„  </span>
                                                               <span class="c1">//è®¾ç½®äººè„¸æ£€æµ‹çš„å‚æ•°  </span>
    <span class="n">detector</span><span class="p">.</span><span class="n">SetMinFaceSize</span><span class="p">(</span><span class="mi">40</span><span class="p">);</span>
    <span class="n">detector</span><span class="p">.</span><span class="n">SetScoreThresh</span><span class="p">(</span><span class="mf">2.</span><span class="n">f</span><span class="p">);</span>
    <span class="n">detector</span><span class="p">.</span><span class="n">SetImagePyramidScaleFactor</span><span class="p">(</span><span class="mf">0.8</span><span class="n">f</span><span class="p">);</span>
    <span class="n">detector</span><span class="p">.</span><span class="n">SetWindowStep</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>

    <span class="n">cv</span><span class="o">::</span><span class="n">Mat</span> <span class="n">img</span> <span class="o">=</span> <span class="n">cv</span><span class="o">::</span><span class="n">imread</span><span class="p">(</span><span class="n">img_path</span><span class="p">,</span> <span class="n">cv</span><span class="o">::</span><span class="n">IMREAD_UNCHANGED</span><span class="p">);</span>
    <span class="n">cv</span><span class="o">::</span><span class="n">Mat</span> <span class="n">img_gray</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">img</span><span class="p">.</span><span class="n">channels</span><span class="p">()</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">cv</span><span class="o">::</span><span class="n">cvtColor</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">img_gray</span><span class="p">,</span> <span class="n">cv</span><span class="o">::</span><span class="n">COLOR_BGR2GRAY</span><span class="p">);</span>
    <span class="k">else</span>
        <span class="n">img_gray</span> <span class="o">=</span> <span class="n">img</span><span class="p">;</span>

    <span class="n">seeta</span><span class="o">::</span><span class="n">ImageData</span> <span class="n">img_data</span><span class="p">;</span>
    <span class="n">img_data</span><span class="p">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">img_gray</span><span class="p">.</span><span class="n">data</span><span class="p">;</span><span class="c1">//æ³¨æ„è¿™é‡Œå¿…é¡»æ˜¯å•é€šé“çš„å›¾åƒ  </span>
    <span class="n">img_data</span><span class="p">.</span><span class="n">width</span> <span class="o">=</span> <span class="n">img_gray</span><span class="p">.</span><span class="n">cols</span><span class="p">;</span>
    <span class="n">img_data</span><span class="p">.</span><span class="n">height</span> <span class="o">=</span> <span class="n">img_gray</span><span class="p">.</span><span class="n">rows</span><span class="p">;</span>
    <span class="n">img_data</span><span class="p">.</span><span class="n">num_channels</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

    <span class="kt">long</span> <span class="n">t0</span> <span class="o">=</span> <span class="n">cv</span><span class="o">::</span><span class="n">getTickCount</span><span class="p">();</span>
    <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">seeta</span><span class="o">::</span><span class="n">FaceInfo</span><span class="o">&gt;</span> <span class="n">faces</span> <span class="o">=</span> <span class="n">detector</span><span class="p">.</span><span class="n">Detect</span><span class="p">(</span><span class="n">img_data</span><span class="p">);</span><span class="c1">//äººè„¸æ£€æµ‹çš„ä¸»è¦å‡½æ•°  </span>
    <span class="kt">long</span> <span class="n">t1</span> <span class="o">=</span> <span class="n">cv</span><span class="o">::</span><span class="n">getTickCount</span><span class="p">();</span>
    <span class="kt">double</span> <span class="n">secs</span> <span class="o">=</span> <span class="p">(</span><span class="n">t1</span> <span class="o">-</span> <span class="n">t0</span><span class="p">)</span> <span class="o">/</span> <span class="n">cv</span><span class="o">::</span><span class="n">getTickFrequency</span><span class="p">();</span>

    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Detections takes "</span> <span class="o">&lt;&lt;</span> <span class="n">secs</span> <span class="o">&lt;&lt;</span> <span class="s">" seconds "</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<span class="cp">#ifdef USE_OPENMP  
</span>    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"OpenMP is used."</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<span class="cp">#else  
</span>    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"OpenMP is not used. "</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<span class="cp">#endif  
</span>
<span class="cp">#ifdef USE_SSE  
</span>    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"SSE is used."</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<span class="cp">#else  
</span>    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"SSE is not used."</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<span class="cp">#endif  
</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Image size (wxh): "</span> <span class="o">&lt;&lt;</span> <span class="n">img_data</span><span class="p">.</span><span class="n">width</span> <span class="o">&lt;&lt;</span> <span class="s">"x"</span>
        <span class="o">&lt;&lt;</span> <span class="n">img_data</span><span class="p">.</span><span class="n">height</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>

    <span class="n">cv</span><span class="o">::</span><span class="n">Rect</span> <span class="n">face_rect</span><span class="p">;</span>
    <span class="kt">int32_t</span> <span class="n">num_face</span> <span class="o">=</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">int32_t</span><span class="o">&gt;</span><span class="p">(</span><span class="n">faces</span><span class="p">.</span><span class="n">size</span><span class="p">());</span>

    <span class="k">for</span> <span class="p">(</span><span class="kt">int32_t</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">num_face</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="c1">//æå–æ‰¾åˆ°çš„äººè„¸åŒºåŸŸ  </span>
    <span class="p">{</span>
        <span class="n">face_rect</span><span class="p">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">faces</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">bbox</span><span class="p">.</span><span class="n">x</span><span class="p">;</span>
        <span class="n">face_rect</span><span class="p">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">faces</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">bbox</span><span class="p">.</span><span class="n">y</span><span class="p">;</span>
        <span class="n">face_rect</span><span class="p">.</span><span class="n">width</span> <span class="o">=</span> <span class="n">faces</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">bbox</span><span class="p">.</span><span class="n">width</span><span class="p">;</span>
        <span class="n">face_rect</span><span class="p">.</span><span class="n">height</span> <span class="o">=</span> <span class="n">faces</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">bbox</span><span class="p">.</span><span class="n">height</span><span class="p">;</span>

        <span class="n">cv</span><span class="o">::</span><span class="n">rectangle</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">face_rect</span><span class="p">,</span> <span class="n">CV_RGB</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">),</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="n">cv</span><span class="o">::</span><span class="n">namedWindow</span><span class="p">(</span><span class="s">"Test"</span><span class="p">,</span> <span class="n">cv</span><span class="o">::</span><span class="n">WINDOW_AUTOSIZE</span><span class="p">);</span>
    <span class="n">cv</span><span class="o">::</span><span class="n">imshow</span><span class="p">(</span><span class="s">"Test"</span><span class="p">,</span> <span class="n">img</span><span class="p">);</span>
    <span class="n">cv</span><span class="o">::</span><span class="n">waitKey</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
    <span class="n">cv</span><span class="o">::</span><span class="n">destroyAllWindows</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div></div>

<p>å…¶ä¸­è¦ç‰¹åˆ«æ³¨æ„çš„ä¸€ç‚¹å°±æ˜¯å›¾ç‰‡å’Œæ¨¡å‹çš„ç»å¯¹è·¯å¾„è¦ç”¨ <strong>â€œ/â€</strong>ï¼ŒWindowsé‡Œé¢é»˜è®¤çš„æ˜¯â€œ\â€,åšä¸»åœ¨æœ€å¼€å§‹è·‘ä»£ç çš„æ—¶å€™æ€»æ˜¯æŠ›å‡ºå¼‚å¸¸ï¼Œä»”ç»†å®šä½åˆ†æä»¥åç¨æ”¹åŠ¨äº†ä»¥ä¸Šçš„å†…å®¹å°±æˆåŠŸè¿è¡Œäº†ä»£ç ã€‚
æˆ‘æ˜¯ä»¥ç®€å•çš„face recognitionä¸ºä¾‹è·‘çš„ä»£ç ï¼Œéšä¾¿è´´ä¸€ä¸‹æˆ‘çš„è¿è¡Œç»“æœå§</p>

<p><img src="https://upload-images.jianshu.io/upload_images/10780978-e65193f81473a483.PNG?imageMogr2/auto-orient/strip%7CimageView2/2/w/801/format/webp" alt="img" /></p>

<p><strong>åç»­å°†ä¼šè¿›ä¸€æ­¥æµ‹è¯•face alignmentå’Œface identification</strong></p>
:ET